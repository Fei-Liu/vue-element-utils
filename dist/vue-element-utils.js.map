{"version":3,"file":"vue-element-utils.js","sources":["../src/select-scroll.js","../src/dialog-drag.js","../src/dialog-drag-width.js","../src/dialog-corner.js","../src/clipboard.js","../src/main.js"],"sourcesContent":["export default {\n    bind(el, binding) {\n        // 获取 element-ui 定义好的 scroll 盒子\n        const selectWrap = el.querySelector(\n            '.el-select-dropdown .el-select-dropdown__wrap'\n        );\n\n        selectWrap.addEventListener('scroll', function() {\n            /**\n             * scrollHeight 获取元素内容高度（只读）\n             *\n             * scrollTop 获取或者设置元素的偏移量，常用于：计算滚动条的位置，当一个元素的容器没有产生方向的滚动条，那它的 scrollTop 的值默认为0\n             *\n             * clientHeight 读取元素的可见高度（只读）\n             *\n             * 如果元素滚动到底, 等式`ele.scrollHeight - ele.scrollTop === ele.clientHeight;`返回 true, 没有则返回 false\n             */\n            const condition = this.scrollHeight - this.scrollTop <= this.clientHeight;\n            condition && binding.value();\n        });\n    }\n}","export default {\n    bind(el) {\n        const dialogHeaderEl = el.querySelector('.el-dialog__header');\n        const dragDom = el.querySelector('.el-dialog');\n        dialogHeaderEl.style.cssText += ';cursor:move;';\n\n        // 获取原有属性 ie dom 元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\n        const sty = dragDom.currentStyle || window.getComputedStyle(dragDom, null);\n\n        const w = document.documentElement.clientWidth;\n        const h = document.documentElement.clientHeight;\n        \n        const headerWidth = dialogHeaderEl.offsetWidth;\n        const headerHeight = dialogHeaderEl.offsetHeight;\n        const domHeight = dragDom.offsetHeight;\n\n        dialogHeaderEl.onmousedown = (e) => {\n            // 鼠标按下，计算当前元素距离可视区的距离\n            const disX = e.clientX - dialogHeaderEl.offsetLeft;\n            const disY = e.clientY - dialogHeaderEl.offsetTop;\n\n            const cursor2left = e.clientX - dialogHeaderEl.getBoundingClientRect().left;\n            const cursor2right = headerWidth - cursor2left;\n            const cursor2top = e.clientY - dragDom.getBoundingClientRect().top;\n            const cursor2bottom = domHeight - cursor2top;\n\n            // 获取到的值带 px 正则匹配替换\n            let styL, styT;\n\n            // 注意在 ie 中 第一次获取到的值为组件自带 50% 移动之后赋值为 px\n            if (sty.left.includes('%')) {\n                styL = +document.body.clientWidth * (+sty.left.replace(/\\%/g, '') / 100);\n                styT = +document.body.clientHeight * (+sty.top.replace(/\\%/g, '') / 100);\n            } else {\n                styL = +sty.left.replace(/\\px/g, '');\n                styT = +sty.top.replace(/\\px/g, '');\n            }\n\n            document.onmousemove = function(e) {\n                // 通过事件委托，计算移动的距离\n                let l = e.clientX - disX;\n                let t = e.clientY - disY;\n                   \n                if (e.clientX < headerWidth) {\n                    // 命中左侧极端值区域，l 取极小值\n                    l = l + cursor2left - e.clientX;\n                }\n                if (e.clientX + cursor2right > w) {\n                    // 命中右侧极端值区域，l 取极大值\n                    l = l - (e.clientX + cursor2right - w);\n                }  \n                if (e.clientY < headerHeight) {\n                    // 命中上侧极端值区域, t 取极小值\n                    t = t + cursor2top - e.clientY;\n                }\n                if (e.clientY + cursor2bottom > h) {\n                    // 命中下侧极端值区域, t 取极大值\n                    t = t - (e.clientY + cursor2bottom - h);\n                }\n\n                // 移动当前元素\n                dragDom.style.left = `${l + styL}px`;\n                dragDom.style.top = `${t + styT}px`;\n\n                //将此时的位置传出去\n                //binding.value({x:e.pageX,y:e.pageY})\n            };\n\n            document.onmouseup = function(e) {\n                document.onmousemove = null;\n                document.onmouseup = null;\n            };\n        };\n    }\n}","export default {\n    bind(el) {\n        const dragDom = el.querySelector('.el-dialog');\n        const lineEl = document.createElement('div');\n        lineEl.style =\n            'width: 2px; background: inherit; height: 80%; position: absolute; right: 0; top: 0; bottom: 0; margin: auto; z-index: 1; cursor: w-resize;';\n        lineEl.addEventListener(\n            'mousedown',\n            function(e) {\n                // 鼠标按下，计算当前元素距离可视区的距离\n                const disX = e.clientX - el.offsetLeft;\n\n                // 当前宽度\n                const curWidth = dragDom.offsetWidth;\n\n                document.onmousemove = function(e) {\n                    e.preventDefault(); // 移动时禁用默认事件\n\n                    // 通过事件委托，计算移动的距离\n                    const l = e.clientX - disX;\n                    \n                    dragDom.style.width = `${curWidth + l}px`;\n                };\n\n                document.onmouseup = function(e) {\n                    document.onmousemove = null;\n                    document.onmouseup = null;\n                };\n            },\n            false\n        );\n        dragDom.appendChild(lineEl);\n    }\n}","// 右下角拖拽宽高\nexport default {\n    bind(el) {\n        const dragDom = el.querySelector('.el-dialog');\n        const lineEl = document.createElement('div');\n        lineEl.style =\n            'width: 6px; background: inherit; height: 6px; position: absolute; right: 0; bottom: 0; margin: auto; z-index: 1; cursor: nwse-resize;';\n        lineEl.addEventListener(\n            'mousedown',\n            function(e) {\n                // 鼠标按下，计算当前元素距离可视区的距离\n                const disX = e.clientX - el.offsetLeft;\n                const disY = e.clientY - el.offsetTop;\n\n                // 当前宽度 高度\n                const curWidth = dragDom.offsetWidth;\n                const curHeight = dragDom.offsetHeight;\n\n                document.onmousemove = function(e) {\n                    e.preventDefault(); // 移动时禁用默认事件\n\n                    // 通过事件委托，计算移动的距离\n                    const xl = e.clientX - disX;\n                    const yl = e.clientY - disY\n                    \n                    dragDom.style.width = `${curWidth + xl}px`;\n                    dragDom.style.height = `${curHeight + yl}px`;\n                };\n\n                document.onmouseup = function(e) {\n                    document.onmousemove = null;\n                    document.onmouseup = null;\n                };\n            },\n            false\n        );\n        dragDom.appendChild(lineEl);\n    }\n}","const eventUtil = {\n    addHandler(element, type, handler) {\n        if (element.addEventListener) {\n            element.addEventListener(type, handler, false);\n        } else if (element.attachEvent) {\n            element.attachEvent('on' + type, handler);\n        } else {\n            element['on' + type] = handler;\n        }\n    },\n    removeHandler(element, type, handler) {\n        if (element.removeEventListener) {\n            element.removeEventListener(type, handler, false);\n        } else if (element.detachEvent) {\n            element.detachEvent('on' + type, handler);\n        } else {\n            element['on' + type] = null;\n        }\n    },\n};\n\nfunction clipboard(text) {\n    return new Promise((reslove, reject) => {\n        const input = document.createElement('input');\n        input.setAttribute('readonly', 'readonly');\n        input.setAttribute('value', text);\n        document.body.appendChild(input);\n        input.select();\n        input.setSelectionRange(0, text.length);\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n            reslove(text);\n        } else {\n            reject(new Error('复制失败'));\n        }\n        document.body.removeChild(input);\n    });\n}\nconst $clipboard = clipboard;\n\nexport { $clipboard };\n\nexport default {\n    bind: function (el, binding, vnode) {\n        if (binding.arg === 'success') {\n            el._clipboard_success = binding.value;\n        } else if (binding.arg === 'error') {\n            el._clipboard_error = binding.value;\n        } else {\n            el._clipboard_message = binding.value;\n            eventUtil.addHandler(el, 'click', () => {\n                // log(el._clipboard_message);\n                clipboard(el._clipboard_message)\n                    .then((msg) => {\n                        el._clipboard_success(msg);\n                    })\n                    .catch((err) => {\n                        el._clipboard_error(err);\n                    });\n            });\n        }\n    },\n    update: function (el, binding) {\n        if (binding.arg === 'success') {\n            el._clipboard_success = binding.value;\n        } else if (binding.arg === 'error') {\n            el._clipboard_error = binding.value;\n        } else {\n            el._clipboard_message = binding.value;\n        }\n    },\n    unbind: function (el, binding) {\n        if (binding.arg === 'success') {\n            delete el._clipboard_success;\n        } else if (binding.arg === 'error') {\n            delete el._clipboard_error;\n        } else {\n            delete el._clipboard_message;\n            eventUtil.removeHandler(el, 'click');\n        }\n    },\n};\n","import selectScroll from './select-scroll';\nimport dialogDrag from './dialog-drag';\nimport dialogDragWidth from './dialog-drag-width';\nimport dialogCorner from './dialog-corner';\nimport clipboard, { $clipboard } from './clipboard';\n\nconst util = {\n    install(Vue) {\n        Vue.prototype.$clipboard = $clipboard;\n        Vue.directive('clipboard', clipboard);\n        Vue.directive('el-dialog-drag', dialogDrag);\n        Vue.directive('el-dialog-drag-width', dialogDragWidth);\n        Vue.directive('el-dialog-corner', dialogCorner);\n        Vue.directive('el-select-scroll', selectScroll);\n    }\n};\n\nexport default util;"],"names":["bind","el","binding","querySelector","addEventListener","this","scrollHeight","scrollTop","clientHeight","value","dialogHeaderEl","dragDom","style","cssText","sty","currentStyle","window","getComputedStyle","w","document","documentElement","clientWidth","h","headerWidth","offsetWidth","headerHeight","offsetHeight","domHeight","onmousedown","e","styL","styT","disX","clientX","offsetLeft","disY","clientY","offsetTop","cursor2left","getBoundingClientRect","left","cursor2right","cursor2top","top","cursor2bottom","includes","body","replace","onmousemove","l","t","onmouseup","lineEl","createElement","curWidth","preventDefault","width","appendChild","curHeight","xl","yl","height","eventUtil","element","type","handler","attachEvent","removeEventListener","detachEvent","clipboard","text","Promise","reslove","reject","input","setAttribute","select","setSelectionRange","length","execCommand","Error","removeChild","$clipboard","vnode","arg","_clipboard_success","_clipboard_error","_clipboard_message","then","msg","err","update","unbind","install","Vue","prototype","directive","dialogDrag","dialogDragWidth","dialogCorner","selectScroll"],"mappings":"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"}