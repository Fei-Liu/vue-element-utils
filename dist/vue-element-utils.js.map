{"version":3,"file":"vue-element-utils.js","sources":["../src/select-scroll.js","../src/dialog-drag.js","../src/dialog-drag-width.js","../src/clipboard.js","../src/main.js"],"sourcesContent":["export default {\r\n    bind(el, binding) {\r\n        // 获取 element-ui 定义好的 scroll 盒子\r\n        const selectWrap = el.querySelector(\r\n            '.el-select-dropdown .el-select-dropdown__wrap'\r\n        );\r\n\r\n        selectWrap.addEventListener('scroll', function() {\r\n            /**\r\n             * scrollHeight 获取元素内容高度（只读）\r\n             *\r\n             * scrollTop 获取或者设置元素的偏移量，常用于：计算滚动条的位置，当一个元素的容器没有产生方向的滚动条，那它的 scrollTop 的值默认为0\r\n             *\r\n             * clientHeight 读取元素的可见高度（只读）\r\n             *\r\n             * 如果元素滚动到底, 等式`ele.scrollHeight - ele.scrollTop === ele.clientHeight;`返回 true, 没有则返回 false\r\n             */\r\n            const condition = this.scrollHeight - this.scrollTop <= this.clientHeight;\r\n            condition && binding.value();\r\n        });\r\n    }\r\n}","export default {\r\n    bind(el) {\r\n        const dialogHeaderEl = el.querySelector('.el-dialog__header');\r\n        const dragDom = el.querySelector('.el-dialog');\r\n        dialogHeaderEl.style.cssText += ';cursor:move;';\r\n\r\n        // 获取原有属性 ie dom 元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\r\n        const sty = dragDom.currentStyle || window.getComputedStyle(dragDom, null);\r\n\r\n        const w = document.documentElement.clientWidth;\r\n        const h = document.documentElement.clientHeight;\r\n        \r\n        const headerWidth = dialogHeaderEl.offsetWidth;\r\n        const headerHeight = dialogHeaderEl.offsetHeight;\r\n        const domHeight = dragDom.offsetHeight;\r\n\r\n        dialogHeaderEl.onmousedown = (e) => {\r\n            // 鼠标按下，计算当前元素距离可视区的距离\r\n            const disX = e.clientX - dialogHeaderEl.offsetLeft;\r\n            const disY = e.clientY - dialogHeaderEl.offsetTop;\r\n\r\n            const cursor2left = e.clientX - dialogHeaderEl.getBoundingClientRect().left;\r\n            const cursor2right = headerWidth - cursor2left;\r\n            const cursor2top = e.clientY - dragDom.getBoundingClientRect().top;\r\n            const cursor2bottom = domHeight - cursor2top;\r\n\r\n            // 获取到的值带 px 正则匹配替换\r\n            let styL, styT;\r\n\r\n            // 注意在 ie 中 第一次获取到的值为组件自带 50% 移动之后赋值为 px\r\n            if (sty.left.includes('%')) {\r\n                styL = +document.body.clientWidth * (+sty.left.replace(/\\%/g, '') / 100);\r\n                styT = +document.body.clientHeight * (+sty.top.replace(/\\%/g, '') / 100);\r\n            } else {\r\n                styL = +sty.left.replace(/\\px/g, '');\r\n                styT = +sty.top.replace(/\\px/g, '');\r\n            }\r\n\r\n            document.onmousemove = function(e) {\r\n                // 通过事件委托，计算移动的距离\r\n                let l = e.clientX - disX;\r\n                let t = e.clientY - disY;\r\n                   \r\n                if (e.clientX < headerWidth) {\r\n                    // 命中左侧极端值区域，l 取极小值\r\n                    l = l + cursor2left - e.clientX;\r\n                }\r\n                if (e.clientX + cursor2right > w) {\r\n                    // 命中右侧极端值区域，l 取极大值\r\n                    l = l - (e.clientX + cursor2right - w);\r\n                }  \r\n                if (e.clientY < headerHeight) {\r\n                    // 命中上侧极端值区域, t 取极小值\r\n                    t = t + cursor2top - e.clientY;\r\n                }\r\n                if (e.clientY + cursor2bottom > h) {\r\n                    // 命中下侧极端值区域, t 取极大值\r\n                    t = t - (e.clientY + cursor2bottom - h);\r\n                }\r\n\r\n                // 移动当前元素\r\n                dragDom.style.left = `${l + styL}px`;\r\n                dragDom.style.top = `${t + styT}px`;\r\n\r\n                //将此时的位置传出去\r\n                //binding.value({x:e.pageX,y:e.pageY})\r\n            };\r\n\r\n            document.onmouseup = function(e) {\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n            };\r\n        };\r\n    }\r\n}","export default {\r\n    bind(el) {\r\n        const dragDom = el.querySelector('.el-dialog');\r\n        const lineEl = document.createElement('div');\r\n        lineEl.style =\r\n            'width: 2px; background: inherit; height: 80%; position: absolute; right: 0; top: 0; bottom: 0; margin: auto; z-index: 1; cursor: w-resize;';\r\n        lineEl.addEventListener(\r\n            'mousedown',\r\n            function(e) {\r\n                // 鼠标按下，计算当前元素距离可视区的距离\r\n                const disX = e.clientX - el.offsetLeft;\r\n\r\n                // 当前宽度\r\n                const curWidth = dragDom.offsetWidth;\r\n\r\n                document.onmousemove = function(e) {\r\n                    e.preventDefault(); // 移动时禁用默认事件\r\n\r\n                    // 通过事件委托，计算移动的距离\r\n                    const l = e.clientX - disX;\r\n                    \r\n                    dragDom.style.width = `${curWidth + l}px`;\r\n                };\r\n\r\n                document.onmouseup = function(e) {\r\n                    document.onmousemove = null;\r\n                    document.onmouseup = null;\r\n                };\r\n            },\r\n            false\r\n        );\r\n        dragDom.appendChild(lineEl);\r\n    }\r\n}","const eventUtil = {\r\n    addHandler(element, type, handler) {\r\n        if (element.addEventListener) {\r\n            element.addEventListener(type, handler, false);\r\n        } else if (element.attachEvent) {\r\n            element.attachEvent('on' + type, handler);\r\n        } else {\r\n            element['on' + type] = handler;\r\n        }\r\n    },\r\n    removeHandler(element, type, handler) {\r\n        if (element.removeEventListener) {\r\n            element.removeEventListener(type, handler, false);\r\n        } else if (element.detachEvent) {\r\n            element.detachEvent('on' + type, handler);\r\n        } else {\r\n            element['on' + type] = null;\r\n        }\r\n    },\r\n};\r\n\r\nfunction clipboard(text) {\r\n    return new Promise((reslove, reject) => {\r\n        const input = document.createElement('input');\r\n        input.setAttribute('readonly', 'readonly');\r\n        input.setAttribute('value', text);\r\n        document.body.appendChild(input);\r\n        input.select();\r\n        input.setSelectionRange(0, text.length);\r\n        if (document.execCommand('copy')) {\r\n            document.execCommand('copy');\r\n            reslove(text);\r\n        } else {\r\n            reject(new Error('复制失败'));\r\n        }\r\n        document.body.removeChild(input);\r\n    });\r\n}\r\nconst $clipboard = clipboard;\r\n\r\nexport { $clipboard };\r\n\r\nexport default {\r\n    bind: function (el, binding, vnode) {\r\n        if (binding.arg === 'success') {\r\n            el._clipboard_success = binding.value;\r\n        } else if (binding.arg === 'error') {\r\n            el._clipboard_error = binding.value;\r\n        } else {\r\n            el._clipboard_message = binding.value;\r\n            eventUtil.addHandler(el, 'click', () => {\r\n                // log(el._clipboard_message);\r\n                clipboard(el._clipboard_message)\r\n                    .then((msg) => {\r\n                        el._clipboard_success(msg);\r\n                    })\r\n                    .catch((err) => {\r\n                        el._clipboard_error(err);\r\n                    });\r\n            });\r\n        }\r\n    },\r\n    update: function (el, binding) {\r\n        if (binding.arg === 'success') {\r\n            el._clipboard_success = binding.value;\r\n        } else if (binding.arg === 'error') {\r\n            el._clipboard_error = binding.value;\r\n        } else {\r\n            el._clipboard_message = binding.value;\r\n        }\r\n    },\r\n    unbind: function (el, binding) {\r\n        if (binding.arg === 'success') {\r\n            delete el._clipboard_success;\r\n        } else if (binding.arg === 'error') {\r\n            delete el._clipboard_error;\r\n        } else {\r\n            delete el._clipboard_message;\r\n            eventUtil.removeHandler(el, 'click');\r\n        }\r\n    },\r\n};\r\n","import selectScroll from './select-scroll';\r\nimport dialogDrag from './dialog-drag';\r\nimport dialogDragWidth from './dialog-drag-width';\r\nimport clipboard, { $clipboard } from './clipboard';\r\n\r\nconst util = {\r\n    install(Vue) {\r\n        Vue.prototype.$clipboard = $clipboard;\r\n        Vue.directive('clipboard', clipboard);\r\n        Vue.directive('el-dialog-drag', dialogDrag);\r\n        Vue.directive('el-dialog-drag-width', dialogDragWidth);\r\n        Vue.directive('el-select-scroll', selectScroll);\r\n    }\r\n};\r\n\r\nexport default util;"],"names":["bind","el","binding","querySelector","addEventListener","this","scrollHeight","scrollTop","clientHeight","value","dialogHeaderEl","dragDom","style","cssText","sty","currentStyle","window","getComputedStyle","w","document","documentElement","clientWidth","h","headerWidth","offsetWidth","headerHeight","offsetHeight","domHeight","onmousedown","e","styL","styT","disX","clientX","offsetLeft","disY","clientY","offsetTop","cursor2left","getBoundingClientRect","left","cursor2right","cursor2top","top","cursor2bottom","includes","body","replace","onmousemove","l","t","onmouseup","lineEl","createElement","curWidth","preventDefault","width","appendChild","eventUtil","element","type","handler","attachEvent","removeEventListener","detachEvent","clipboard","text","Promise","reslove","reject","input","setAttribute","select","setSelectionRange","length","execCommand","Error","removeChild","$clipboard","vnode","arg","_clipboard_success","_clipboard_error","_clipboard_message","then","msg","err","update","unbind","install","Vue","prototype","directive","dialogDrag","dialogDragWidth","selectScroll"],"mappings":"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"}