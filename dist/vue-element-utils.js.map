{"version":3,"file":"vue-element-utils.js","sources":["../src/select-scroll.js","../src/dialog-drag.js","../src/dialog-drag-width.js","../src/clipboard.js","../src/main.js"],"sourcesContent":["export default {\r\n    bind(el, binding) {\r\n        // 获取 element-ui 定义好的 scroll 盒子\r\n        const selectWrap = el.querySelector(\r\n            '.el-select-dropdown .el-select-dropdown__wrap'\r\n        );\r\n\r\n        selectWrap.addEventListener('scroll', function() {\r\n            /**\r\n             * scrollHeight 获取元素内容高度（只读）\r\n             *\r\n             * scrollTop 获取或者设置元素的偏移量，常用于：计算滚动条的位置，当一个元素的容器没有产生方向的滚动条，那它的 scrollTop 的值默认为0\r\n             *\r\n             * clientHeight 读取元素的可见高度（只读）\r\n             *\r\n             * 如果元素滚动到底, 等式`ele.scrollHeight - ele.scrollTop === ele.clientHeight;`返回 true, 没有则返回 false\r\n             */\r\n            const condition = this.scrollHeight - this.scrollTop <= this.clientHeight;\r\n            condition && binding.value();\r\n        });\r\n    }\r\n}","export default {\r\n    bind(el) {\r\n        const dialogHeaderEl = el.querySelector('.el-dialog__header');\r\n        const dragDom = el.querySelector('.el-dialog');\r\n        dialogHeaderEl.style.cssText += ';cursor:move;';\r\n\r\n        // 获取原有属性 ie dom 元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\r\n        const sty = dragDom.currentStyle || window.getComputedStyle(dragDom, null);\r\n\r\n        dialogHeaderEl.onmousedown = (e) => {\r\n            // 鼠标按下，计算当前元素距离可视区的距离\r\n            const disX = e.clientX - dialogHeaderEl.offsetLeft;\r\n            const disY = e.clientY - dialogHeaderEl.offsetTop;\r\n\r\n            // 获取到的值带 px 正则匹配替换\r\n            let styL, styT;\r\n\r\n            // 注意在 ie 中 第一次获取到的值为组件自带 50% 移动之后赋值为 px\r\n            if (sty.left.includes('%')) {\r\n                styL = +document.body.clientWidth * (+sty.left.replace(/\\%/g, '') / 100);\r\n                styT = +document.body.clientHeight * (+sty.top.replace(/\\%/g, '') / 100);\r\n            } else {\r\n                styL = +sty.left.replace(/\\px/g, '');\r\n                styT = +sty.top.replace(/\\px/g, '');\r\n            }\r\n\r\n            document.onmousemove = function(e) {\r\n                // 通过事件委托，计算移动的距离\r\n                const l = e.clientX - disX;\r\n                const t = e.clientY - disY;\r\n\r\n                // 移动当前元素\r\n                dragDom.style.left = `${l + styL}px`;\r\n                dragDom.style.top = `${t + styT}px`;\r\n\r\n                //将此时的位置传出去\r\n                //binding.value({x:e.pageX,y:e.pageY})\r\n            };\r\n\r\n            document.onmouseup = function(e) {\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n            };\r\n        };\r\n    }\r\n}","export default {\r\n    bind(el) {\r\n        const dragDom = el.querySelector('.el-dialog');\r\n        const lineEl = document.createElement('div');\r\n        lineEl.style =\r\n            'width: 2px; background: inherit; height: 80%; position: absolute; right: 0; top: 0; bottom: 0; margin: auto; z-index: 1; cursor: w-resize;';\r\n        lineEl.addEventListener(\r\n            'mousedown',\r\n            function(e) {\r\n                // 鼠标按下，计算当前元素距离可视区的距离\r\n                const disX = e.clientX - el.offsetLeft;\r\n\r\n                // 当前宽度\r\n                const curWidth = dragDom.offsetWidth;\r\n\r\n                document.onmousemove = function(e) {\r\n                    e.preventDefault(); // 移动时禁用默认事件\r\n\r\n                    // 通过事件委托，计算移动的距离\r\n                    const l = e.clientX - disX;\r\n                    \r\n                    dragDom.style.width = `${curWidth + l}px`;\r\n                };\r\n\r\n                document.onmouseup = function(e) {\r\n                    document.onmousemove = null;\r\n                    document.onmouseup = null;\r\n                };\r\n            },\r\n            false\r\n        );\r\n        dragDom.appendChild(lineEl);\r\n    }\r\n}","const eventUtil = {\r\n    addHandler(element, type, handler) {\r\n        if (element.addEventListener) {\r\n            element.addEventListener(type, handler, false);\r\n        } else if (element.attachEvent) {\r\n            element.attachEvent('on' + type, handler);\r\n        } else {\r\n            element['on' + type] = handler;\r\n        }\r\n    },\r\n    removeHandler(element, type, handler) {\r\n        if (element.removeEventListener) {\r\n            element.removeEventListener(type, handler, false);\r\n        } else if (element.detachEvent) {\r\n            element.detachEvent('on' + type, handler);\r\n        } else {\r\n            element['on' + type] = null;\r\n        }\r\n    }\r\n};\r\n\r\nfunction clipboard(text) {\r\n    return new Promise((reslove, reject) => {\r\n        const input = document.createElement('input');\r\n        input.setAttribute('readonly', 'readonly');\r\n        input.setAttribute('value', text);\r\n        document.body.appendChild(input);\r\n        input.focus();\r\n        input.setSelectionRange(0, 9999);\r\n        if (document.execCommand('copy')) {\r\n            document.execCommand('copy');\r\n            reslove(text);\r\n        } else {\r\n            reject(new Error('复制失败'));\r\n        }\r\n        document.body.removeChild(input);\r\n    });\r\n}\r\nconst $clipboard = clipboard;\r\n\r\nexport {\r\n    $clipboard\r\n}\r\n\r\nexport default {\r\n    bind: function(el, binding, vnode) {\r\n        if (binding.arg === 'success') {\r\n            el._clipboard_success = binding.value;\r\n        } else if (binding.arg === 'error') {\r\n            el._clipboard_error = binding.value;\r\n        } else {\r\n            el._clipboard_message = binding.value;\r\n            eventUtil.addHandler(el, 'click', () => {\r\n                // log(el._clipboard_message);\r\n                clipboard(el._clipboard_message).then(msg => {\r\n                    el._clipboard_success(msg);\r\n                }).catch(err => {\r\n                    el._clipboard_error(err);\r\n                });\r\n            });\r\n        }\r\n    },\r\n    unbind: function (el, binding) {\r\n        if (binding.arg === 'success') {\r\n            delete el._clipboard_success;\r\n        } else if (binding.arg === 'error') {\r\n            delete el._clipboard_error;\r\n        } else {\r\n            delete el._clipboard_message;\r\n            eventUtil.removeHandler(el, 'click');\r\n        }\r\n    }\r\n}","import selectScroll from './select-scroll';\r\nimport dialogDrag from './dialog-drag';\r\nimport dialogDragWidth from './dialog-drag-width';\r\nimport clipboard, { $clipboard } from './clipboard';\r\n\r\nconst util = {\r\n    install(Vue) {\r\n        Vue.prototype.$clipboard = $clipboard;\r\n        Vue.directive('clipboard', clipboard);\r\n        Vue.directive('el-dialog-drag', dialogDrag);\r\n        Vue.directive('el-dialog-drag-width', dialogDragWidth);\r\n        Vue.directive('el-select-scroll', selectScroll);\r\n    }\r\n};\r\n\r\nexport default util;"],"names":["bind","el","binding","querySelector","addEventListener","this","scrollHeight","scrollTop","clientHeight","value","dialogHeaderEl","dragDom","style","cssText","sty","currentStyle","window","getComputedStyle","onmousedown","e","styL","styT","disX","clientX","offsetLeft","disY","clientY","offsetTop","left","includes","document","body","clientWidth","replace","top","onmousemove","l","t","onmouseup","lineEl","createElement","curWidth","offsetWidth","preventDefault","width","appendChild","eventUtil","element","type","handler","attachEvent","removeEventListener","detachEvent","clipboard","text","Promise","reslove","reject","input","setAttribute","focus","setSelectionRange","execCommand","Error","removeChild","$clipboard","vnode","arg","_clipboard_success","_clipboard_error","_clipboard_message","then","msg","err","unbind","install","Vue","prototype","directive","dialogDrag","dialogDragWidth","selectScroll"],"mappings":"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"}